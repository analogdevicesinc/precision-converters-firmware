<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Introduction &#8212; Precision Converters Firmware  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8e8a900e" />
    <link rel="stylesheet" type="text/css" href="../../_static/style.min.css?v=95305861" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script defer="" src="../../_static/app.umd.js?v=c93eadd1"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  
  <meta name="global_root" content="../../../">
  <meta name="repo" content="precision-converters-firmware">
  


<style>
  body {
    
  }

  body.dark {
    
  }

  @media (prefers-color-scheme: dark) {
    body:not(.light) {
      
    }
  }
</style>
  </head><body>
  <div class="banner"></div>
  <input type="checkbox" id="input-show-toc">
  <input type="checkbox" id="input-show-localtoc">
  <input type="checkbox" id="input-show-repotoc">

  
  <div class="search-area">
    <form action="" method="get">
      <input type="text" name="q" aria-labelledby="search-documentation" value="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="search" placeholder="Search"/>
      <button value="search" class="icon"></button>
      <span id="search-progress"></span>
    </form>
  </div>
  

  <header>
    <div id="left">
      <label id="show-sidebar" class="icon" for="input-show-toc" title="Show/hide index"></label>
    </div>
    <div id="right">
      <span>
        <a id="logo-org" href="https://analog.com"></a>
        <div class="vertical-divider"></div>
        <label id="show-repotoc" for="input-show-repotoc" title="Show/hide docs" tabindex="0">Docs</label>
        <a id="logo" href="../../index.html">
          <div>Precision Converters Firmware</div>
        </a>
      </span>
      <span class="reverse">
        <label id="show-localtoc" class="icon" for="input-show-localtoc" title="Show/hide contents"></label>
      </span>
    </div>
  </header>


  <div class="repotoc-tree overlay">
    <root>
  <a href="../../../documentation/index.html">System Level</a>
  <a href="../../../hdl/index.html">HDL</a>
  <a href="../../../testbenches/index.html">HDL Testbenches</a>
  <a href="../../../pyadi-iio/index.html">Hardware Python Interfaces</a>
  <a href="../../../libiio/index.html">libiio</a>
  <a href="../../../no-OS/index.html">no-OS</a>
  <a href="../../index.html" class="current">Precision Converters Firmware</a>
  <a href="../../../PrecisionToolbox/index.html">Precision Toolbox</a>
  <a href="../../../scopy/index.html">Scopy</a>
  <a href="../../../doctools/index.html">Doctools</a>
</root>

  </div>
    <div class="localtoc">
      <div class="tocwrapper">
        <div>
          <div class="localtoc-header">On this page</div>
          <a id="scroll-up" href="#top-anchor" title="Back to top"></a>
        </div>
        <nav>
          <ul>
<li><a class="reference internal" href="#">Introduction</a></li>
<li><a class="reference internal" href="#pocketlab-firmware-structure">Pocketlab Firmware Structure</a></li>
<li><a class="reference internal" href="#pocketlab-library">Pocketlab Library</a></li>
<li><a class="reference internal" href="#running-pocket-lab">Running Pocket Lab</a><ul>
<li><a class="reference internal" href="#hardware-setup">Hardware setup</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pocket-lab-gui-views">Pocket Lab GUI Views</a><ul>
<li><a class="reference internal" href="#configuration-view">Configuration View</a></li>
<li><a class="reference internal" href="#register-view">Register View</a></li>
<li><a class="reference internal" href="#dmm-view">DMM View</a></li>
<li><a class="reference internal" href="#capture-view">Capture View</a></li>
<li><a class="reference internal" href="#analysis-view">Analysis View</a></li>
<li><a class="reference internal" href="#about-view">About View</a></li>
</ul>
</li>
</ul>

        </nav>
      </div>
    </div>

  
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
    <a id="no-logo" href="../../index.html">
      Precision Converters Firmware
    </a><input id="input-switch-toc" type="checkbox">
<label id="show-repotoc" for="input-switch-toc">
All content
</label>
<label id="show-toc" for="input-switch-toc">
Content on this topic
</label>
<div class="repotoc-tree">
  <root>
  <a href="../../../documentation/index.html">System Level</a>
  <a href="../../../hdl/index.html">HDL</a>
  <a href="../../../testbenches/index.html">HDL Testbenches</a>
  <a href="../../../pyadi-iio/index.html">Hardware Python Interfaces</a>
  <a href="../../../libiio/index.html">libiio</a>
  <a href="../../../no-OS/index.html">no-OS</a>
  <a href="../../index.html" class="current">Precision Converters Firmware</a>
  <a href="../../../PrecisionToolbox/index.html">Precision Toolbox</a>
  <a href="../../../scopy/index.html">Scopy</a>
  <a href="../../../doctools/index.html">Doctools</a>
</root>

</div>
<div class="toc-tree">
  <html>
  <body><ul>
<li class="toctree-l1"><a class="reference internal" href="../build/project_build.html">Build Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code_style.html">Code Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing to PCFW Repository</a></li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1" id="toctree-collapse-1"/><div class="collapse"><a class="reference internal" href="../projects/index.html">Firmware Applications</a><label for="toctree-collapse-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad2s1210_iio/ad2s1210_iio.html">AD2S1210 IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad355xr_iio/ad355xr_iio.html">AD355XR IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad405x_iio/ad405x_iio.html">AD405x IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad4130_iio/ad4130_iio.html">AD4130 IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad4170_iio/ad4170_iio.html">AD4170 IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad4696_iio/ad4696_iio.html">AD4696 IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad559xr_console/ad559xr_console.html">AD559XR Console Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad5754r_iio/ad5754r_iio.html">AD5754R/CN0586 IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad579x_iio/ad579x_iio.html">AD579X IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad590_console/ad590_console.html">AD590 Console Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad5933_console/ad5933_console.html">AD5933 Console Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad7124_console/ad7124_console.html">AD7124 Console Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad7124_iio/ad7124_iio.html">AD7124 IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad7124_temperature-measure/ad7124_temperature-measure.html">AD7124 Temperature Measure Firmware Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad7134_iio/ad7134_iio.html">AD7134 IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad717x_console/ad717x_console.html">AD717x / AD411x Console Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad717x_iio/ad717x_iio.html">AD717x / AD411x IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad719x_iio/ad719x_iio.html">AD719x IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad738x_iio/ad738x_iio.html">AD738x IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad7606_iio/ad7606_iio.html">AD7606 IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad7689_iio/ad7689_iio.html">AD7689 IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad77681_iio/ad77681_iio.html">AD7768-1 IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad777x_iio/ad777x_iio.html">AD777x IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/adt7420_console/adt7420_console.html">ADT7420 Console Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ltc268x_console/ltc268x_console.html">LTC268x Console Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ltc2672_iio/ltc2672_iio.html">LTC2672 IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/nanodac_console/nanodac_console.html">nanoDAC+ Console Application</a></li>
</ul>
</li>
</ul>
</body>
</html>

</div>
        </div>
      </div>

  <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper" id="top-anchor">
          <div class="body" role="main">
            
  <section id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">#</a></h1>
<p>Pocket lab is a portable display-based embedded solution created primarily for demoing the ADCs functionality.
Pocket Lab makes use of <a class="reference external" href="https://www.st.com/en/microcontrollers-microprocessors/stm32f769ni.html">STM32F769NI-Discovery board</a> from ST microelectronics and 3rd party library LVGL.
The demo functionality was primarily focused on device configuration, register memory access, data capture and FFT analysis.
This documentation describes various components of pocket lab application in subsequent sections.</p>
</section>
<section id="pocketlab-firmware-structure">
<h1>Pocketlab Firmware Structure<a class="headerlink" href="#pocketlab-firmware-structure" title="Link to this heading">#</a></h1>
<p>Below diagram illustrates the architecture of Precision Converters Pocketlab
firmware applications.</p>
<a class="reference internal image-reference" href="../../_images/pocketlab_fw_architecture.png"><img alt="../../_images/pocketlab_fw_architecture.png" src="../../_images/pocketlab_fw_architecture.png" style="width: 500px;" />
</a>
</section>
<section id="pocketlab-library">
<h1>Pocketlab Library<a class="headerlink" href="#pocketlab-library" title="Link to this heading">#</a></h1>
<p>Source Code: <a class="reference external" href="https://github.com/analogdevicesinc/precision-converters-library/tree/main/pocket_lab">Precision Converters Library</a>
Doxygen: <a class="reference external" href="https://analogdevicesinc.github.io/precision-converters-firmware/doxygen/dir_e754d0f20ca3746dccad9be70ecb80f9.html">Doxygen for Pocket Lab</a></p>
<p>Pocket lab library makes use of ‘lvgl (Light versatile graphics library)’. LVGL is primarily targeted for the embedded display-based applications. LVGL is an abstracted library, which supports multiple display boards from the different vendors. So, it’s vendors responsibility to add lvgl support for their display board.
This version of pocket lab library is based on the latest development version of lvgl library. The source code link is: <a class="reference external" href="https://github.com/lvgl/lvgl/tree/7506b61527195fdc96803fe94f5ba141b6e5a9e8">https://github.com/lvgl/lvgl/tree/7506b61527195fdc96803fe94f5ba141b6e5a9e8</a></p>
<p>LVGL uses vendor created portable library to handle the display and touchscreen events. Current version of pocket lab library is targeted for the STM32F769NI Discovery board from ST microelectronics.
The lvgl portable library for the board used is present here: <a class="reference external" href="https://github.com/lvgl/lv_port_stm32f769_disco/tree/4f26b19d42816f10fb8e51a968b2ec924c1e75ba">https://github.com/lvgl/lv_port_stm32f769_disco/tree/4f26b19d42816f10fb8e51a968b2ec924c1e75ba</a></p>
<p>Pocket Lab library mainly contains 3 source modules:</p>
<ul class="simple">
<li><p>pl_gui_views.c/.h</p></li>
<li><p>pl_gui_iio_wrappers.c/.h</p></li>
<li><p>pl_gui_events.c/.h</p></li>
</ul>
</section>
<section id="running-pocket-lab">
<h1>Running Pocket Lab<a class="headerlink" href="#running-pocket-lab" title="Link to this heading">#</a></h1>
<section id="hardware-setup">
<h2>Hardware setup<a class="headerlink" href="#hardware-setup" title="Link to this heading">#</a></h2>
<p>Stack the Eval board on the discovery board. Power the board with USB to Micro B cable through the USB ST link port on the board as shown below</p>
<ul class="simple">
<li><p>Comment out the pocketlab libraries to include them in .mbedignore.</p></li>
<li><p>Change the ACTIVE_IIO_CLIENT to IIO_CLIENT_REMOTE to select pocketlab as a client.</p></li>
</ul>
<a class="reference internal image-reference" href="../../_images/mbedignore_modifications.png"><img alt="../../_images/mbedignore_modifications.png" src="../../_images/mbedignore_modifications.png" style="width: 500px;" />
</a>
<p>Flash the binary on the board and the board gets powered on with a default view as shown below</p>
<a class="reference internal image-reference" href="../../_images/def_view.jpg"><img alt="../../_images/def_view.jpg" src="../../_images/def_view.jpg" style="width: 500px;" />
</a>
</section>
</section>
<section id="pocket-lab-gui-views">
<h1>Pocket Lab GUI Views<a class="headerlink" href="#pocket-lab-gui-views" title="Link to this heading">#</a></h1>
<p>This module takes care of any event happening on the display GUI. The GUI is created in the form of widgets such as buttons, text fields, drop-down menus, etc. Each widget would have associated event handler callback function, that would be registered for a given event object during pocket lab GUI initialization time.
The event handler function would be responsible for handling the user event and forming a proper response to that event.
All the widgets, event objects and event callbacks are created using the lvgl library.
Below are the standard views available for pocket lab and are created from the pocket lab library.
Each Tinyiiod firmware application provides an ability to enable/disable these views.</p>
<section id="configuration-view">
<h2>Configuration View<a class="headerlink" href="#configuration-view" title="Link to this heading">#</a></h2>
<p>Provides ability to read and write the global and channel attributes of the device.</p>
<a class="reference internal image-reference" href="../../_images/config_view.jpg"><img alt="../../_images/config_view.jpg" src="../../_images/config_view.jpg" style="width: 400px;" />
</a>
</section>
<section id="register-view">
<h2>Register View<a class="headerlink" href="#register-view" title="Link to this heading">#</a></h2>
<p>This view provides low level access to the registers of the device. The user can read the register values in hex.</p>
<a class="reference internal image-reference" href="../../_images/register_view.jpg"><img alt="../../_images/register_view.jpg" src="../../_images/register_view.jpg" style="width: 400px;" />
</a>
</section>
<section id="dmm-view">
<h2>DMM View<a class="headerlink" href="#dmm-view" title="Link to this heading">#</a></h2>
<p>This view continuously displays device specific ADC read back value in SI Units, once start button is activated.
There is an option to enable and disable all the channels.</p>
<a class="reference internal image-reference" href="../../_images/dmm_view.jpg"><img alt="../../_images/dmm_view.jpg" src="../../_images/dmm_view.jpg" style="width: 400px;" />
</a>
</section>
<section id="capture-view">
<h2>Capture View<a class="headerlink" href="#capture-view" title="Link to this heading">#</a></h2>
<p>In this view adc raw data can be captured and visualized as waveforms continuously once the start button is activated.</p>
<a class="reference internal image-reference" href="../../_images/capture_view.jpg"><img alt="../../_images/capture_view.jpg" src="../../_images/capture_view.jpg" style="width: 400px;" />
</a>
</section>
<section id="analysis-view">
<h2>Analysis View<a class="headerlink" href="#analysis-view" title="Link to this heading">#</a></h2>
<p>In this view FFT analysis can be visualized. Key information such as SNR, THD, Fund Power, freq and RMS noise is displayed on the right pane.</p>
<p>FFT analysis can be performed only on one channel at a time.</p>
<a class="reference internal image-reference" href="../../_images/fft_view.jpg"><img alt="../../_images/fft_view.jpg" src="../../_images/fft_view.jpg" style="width: 400px;" />
</a>
</section>
<section id="about-view">
<h2>About View<a class="headerlink" href="#about-view" title="Link to this heading">#</a></h2>
<p>About screen is used to provide high level product features and some presentation material on the product’s value and USP</p>
<a class="reference internal image-reference" href="../../_images/about_view.jpg"><img alt="../../_images/about_view.jpg" src="../../_images/about_view.jpg" style="width: 400px;" />
</a>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure to select the channels and then press the start button for capture / dmm view. Only one PL GUI view should be accessed at a time.
If the display misbehaves, press the onboard reset or replug the board.</p>
</div>
</section>
</section>


          </div>
              <div class="related">
                &nbsp;
    <div></div>
    <div></div>
              </div>
          
        </div>
      </div>
  </div>

  <div id="vertical-border"></div>

  <label id="cancel-area-show-toc" for="input-show-toc"></label>
  <label id="cancel-area-show-localtoc" for="input-show-localtoc"></label>
    <footer>
      &#169;2023-2024, Analog Devices Inc.
      
      |
      Made with <a href="https://www.sphinx-doc.org/">Sphinx</a>
      &amp; <a href="https://github.com/analogdevicesinc/doctools">Doctools</a>
      
    </footer>
  </body>
</html>