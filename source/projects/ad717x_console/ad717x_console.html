<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta content="Supported Devices:" name="description" />

    <title>AD717x / AD411x Console Application &#8212; Precision Converters Firmware  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=8e8a900e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/app.min.css?v=85dade36" />
    <script async="async" src="../../../_static/app.umd.js?v=3a4867e9"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="AD717x / AD411x IIO Application" href="../ad717x_iio/ad717x_iio.html" />
    <link rel="prev" title="AD4134/AD7134 IIO Application" href="../ad4134_iio/ad4134_iio.html" />
   
  
  
  <meta name="repository" content="precision-converters-firmware">
  <meta name="version" content="">
  
    <meta name="page_source_suffix" content=".rst">
  
  
  


<style>
  body {
    
  }

  body.dark {
    
  }

  @media (prefers-color-scheme: dark) {
    body:not(.light) {
      
    }
  }
</style>
  </head>
  
    <body>
  
  <input type="checkbox" id="input-show-toc">
  <input type="checkbox" id="input-show-localtoc">
  <input type="checkbox" id="input-show-repotoc">

  
  <div class="search-area">
    <form action="" method="get">
      <input type="text" name="q" aria-labelledby="search-documentation" value="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="search" placeholder="Search"/>
      <button class="icon"></button>
    </form>
  </div>
  

  <header>
    <div id="left">
      <label id="show-sidebar" class="icon" for="input-show-toc" title="Show/hide index"></label>
    </div>
    <div id="right">
      <span>
        <a id="logo-org" href="https://analog.com" aria-label="Analog Devices Inc. landing page"></a>
        <div class="vertical-divider"></div>
        
        <label id="show-repotoc" for="input-show-repotoc" title="Show/hide docs" tabindex="0">Docs</label>
        
        <a id="logo" href="../../../index.html">
          <div>Precision Converters Firmware</div>
        </a>
      </span>
      <span class="reverse">
        <label id="show-localtoc" class="icon" for="input-show-localtoc" title="Show/hide contents"></label>
      </span>
    </div>
  </header>


  <div class="repotoc-tree overlay">
    <root>
  <a href="../../../index.html" class="current">Precision Converters Firmware</a>
</root>

  </div>
    <div class="localtoc">
      <div class="tocwrapper">
        <div class="header localtoc-header">
          <a id="scroll-up" href="#top-anchor" title="Back to top"></a>
        </div>
        <nav>
          <ul>
<li><a class="reference internal" href="#">AD717x / AD411x Console Application</a><ul>
<li><a class="reference internal" href="#supported-hardware">Supported Hardware</a></li>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#interface-diagram">Interface Diagram</a></li>
<li><a class="reference internal" href="#useful-links">Useful Links</a></li>
<li><a class="reference internal" href="#hardware-connections">Hardware Connections</a></li>
<li><a class="reference internal" href="#power-supply-and-usb-connection">Power Supply and USB Connection</a></li>
<li><a class="reference internal" href="#ad717x-firmware">AD717x Firmware</a></li>
<li><a class="reference internal" href="#build-guide">Build Guide</a><ul>
<li><a class="reference internal" href="#build-prerequisites">Build Prerequisites</a></li>
<li><a class="reference internal" href="#building-a-project">Building a project</a></li>
<li><a class="reference internal" href="#running-a-project">Running a project</a></li>
</ul>
</li>
<li><a class="reference internal" href="#quick-start">Quick Start</a></li>
<li><a class="reference internal" href="#using-the-firmware">Using the Firmware</a></li>
<li><a class="reference internal" href="#support">Support</a></li>
</ul>
</li>
</ul>

        </nav>
      </div>
    </div>

  
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
    <a id="no-logo" href="../../../index.html">
      Precision Converters Firmware
    </a><input id="input-switch-toc" type="checkbox">
<label id="show-repotoc" for="input-switch-toc">
All content
</label>
<label id="show-toc" for="input-switch-toc">
Content on this topic
</label>
<div class="repotoc-tree">
  <root>
  <a href="../../../index.html" class="current">Precision Converters Firmware</a>
</root>

</div>
<div class="toc-tree">
  <html>
  <body><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../build/project_build.html">Build Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../code_style.html">Code Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing to PCFW Repository</a></li>
<li class="toctree-l1 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1" id="toctree-collapse-1" checked=""/><div class="collapse"><a class="reference internal" href="../index.html">Firmware Applications</a><label for="toctree-collapse-1"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../ad2s1210_iio/ad2s1210_iio.html">AD2S1210 IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ad353xr_iio/ad353xr_iio.html">AD3530R IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ad355xr_iio/ad355xr_iio.html">AD355XR IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ad405x_iio/ad405x_iio.html">AD405x IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ad4080_iio/ad4080_iio.html">AD4080 IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ad4130_iio/ad4130_iio.html">AD4130 IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ad4170_iio/ad4170_iio.html">AD4170 IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ad4696_iio/ad4696_iio.html">AD4696 IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ad559xr_console/ad559xr_console.html">AD559XR Console Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ad5754r_iio/ad5754r_iio.html">AD5754R/CN0586 IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ad5770r_console/ad5770r_console.html">AD5770r Console Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ad579x_iio/ad579x_iio.html">AD579X IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ad590_console/ad590_console.html">AD590 Console Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ad5933_console/ad5933_console.html">AD5933 Console Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ad7124_console/ad7124_console.html">AD7124 Console Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ad7124_iio/ad7124_iio.html">AD7124 IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ad7124_temperature-measure/ad7124_temperature-measure.html">AD7124 Temperature Measure Firmware Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ad4134_iio/ad4134_iio.html">AD4134/AD7134 IIO Application</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">AD717x / AD411x Console Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ad717x_iio/ad717x_iio.html">AD717x / AD411x IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ad719x_iio/ad719x_iio.html">AD719x IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ad738x_iio/ad738x_iio.html">AD738x IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ad7606_iio/ad7606_iio.html">AD7606 IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ad7689_iio/ad7689_iio.html">AD7689 IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ad77681_iio/ad77681_iio.html">AD7768-1 IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ad777x_iio/ad777x_iio.html">AD777x IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../adt7420_console/adt7420_console.html">ADT7420 Console Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ltc268x_console/ltc268x_console.html">LTC268x Console Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ltc2672_iio/ltc2672_iio.html">LTC2672 IIO Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nanodac_console/nanodac_console.html">nanoDAC+ Console Application</a></li>
</ul>
</li>
</ul>
</body>
</html>

</div>
        </div>
      </div>

  <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper" id="top-anchor">
          <div class="body-header">
  <nav class="breadcrumb"><ol><li><a href="../index.html">Firmware Applications</a></li></ol></nav>
</div>
          <div class="body" role="main">
            
  <section id="ad717x-ad411x-console-application">
<h1>AD717x / AD411x Console Application<a class="headerlink" href="#ad717x-ad411x-console-application" title="Link to this heading"></a></h1>
<section id="supported-hardware">
<h2>Supported Hardware<a class="headerlink" href="#supported-hardware" title="Link to this heading"></a></h2>
<p><strong>Supported Devices:</strong></p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://www.analog.com/en/products/ad4111.html" target="_blank">AD4111</a> <a class="icon link reference external" href="https://www.analog.com/en/products/ad4112.html" target="_blank">AD4112</a> <a class="icon link reference external" href="https://www.analog.com/en/products/ad4114.html" target="_blank">AD4114</a> <a class="icon link reference external" href="https://www.analog.com/en/products/ad4115.html" target="_blank">AD4115</a> <a class="icon link reference external" href="https://www.analog.com/en/products/ad4116.html" target="_blank">AD4116</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/en/products/ad7172.html" target="_blank">AD7172-2</a>  <a class="icon link reference external" href="https://www.analog.com/en/products/ad7172-4.html" target="_blank">AD7172-4</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/en/products/ad7173-8.html" target="_blank">AD7173-8</a> <a class="icon link reference external" href="https://www.analog.com/en/products/ad7175-2.html" target="_blank">AD7175-2</a> <a class="icon link reference external" href="https://www.analog.com/en/products/ad7175-8.html" target="_blank">AD7175-8</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/en/products/ad7176-2.html" target="_blank">AD7176-2</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/en/products/ad7177-2.html" target="_blank">AD7177-2</a></p></li>
</ul>
<p><strong>Supported Evaluation Boards:</strong></p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://www.analog.com/en/resources/evaluation-hardware-and-software/evaluation-boards-kits/eval-ad4111.html" target="_blank">EVAL-AD4111</a> <a class="icon link reference external" href="https://www.analog.com/en/resources/evaluation-hardware-and-software/evaluation-boards-kits/eval-ad4112.html" target="_blank">EVAL-AD4112</a> <a class="icon link reference external" href="https://www.analog.com/en/resources/evaluation-hardware-and-software/evaluation-boards-kits/eval-ad4114.html" target="_blank">EVAL-AD4114</a> <a class="icon link reference external" href="https://www.analog.com/en/resources/evaluation-hardware-and-software/evaluation-boards-kits/eval-ad4115.html" target="_blank">EVAL-AD4115</a> <a class="icon link reference external" href="https://www.analog.com/en/resources/evaluation-hardware-and-software/evaluation-boards-kits/eval-ad4116.html" target="_blank">EVAL-AD4116</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/en/resources/evaluation-hardware-and-software/evaluation-boards-kits/eval-ad7172-2.html" target="_blank">EVAL-AD7172-2</a>  <a class="icon link reference external" href="https://www.analog.com/en/resources/evaluation-hardware-and-software/evaluation-boards-kits/eval-ad7172-4.html" target="_blank">EVAL-AD7172-4</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/en/resources/evaluation-hardware-and-software/evaluation-boards-kits/eval-ad7173-8sdz.html" target="_blank">EVAL-AD7173-8</a> <a class="icon link reference external" href="https://www.analog.com/en/resources/evaluation-hardware-and-software/evaluation-boards-kits/eval-ad7175-2.html" target="_blank">EVAL-AD7175-2</a> <a class="icon link reference external" href="https://www.analog.com/en/resources/evaluation-hardware-and-software/evaluation-boards-kits/eval-ad7175-8.html" target="_blank">EVAL-AD7175-8</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/en/resources/evaluation-hardware-and-software/evaluation-boards-kits/eval-ad7176-2.html" target="_blank">EVAL-AD7176-2</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/en/resources/evaluation-hardware-and-software/evaluation-boards-kits/eval-ad7177-2.html" target="_blank">EVAL-AD7177-2</a></p></li>
</ul>
<p><strong>Supported Carrier Boards:</strong></p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://www.analog.com/en/resources/evaluation-hardware-and-software/evaluation-boards-kits/sdp-k1.html#eb-overview" target="_blank">SDP-K1</a></p></li>
</ul>
</section>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading"></a></h2>
<p>The AD717x/AD411x family offer a complete integrated Sigma-Delta ADC solution which can be used in high precision, low noise single channel applications (Life Science measurements) or higher speed multiplexed applications (Factory Automation PLC Input modules).
This page gives an overview of using the AD717x/AD411x firmware example with SDP-K1 EVAL board, interfacing with various EVAL boards supporting AD711x/AD411x family devices.
The firmware example comprises 3 layers of software (from top to bottom): Console Application Layer, Device No-OS Layer and Platform Drivers layer. It supports STM32 and Mbed platforms.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../../_images/ad717x_architecture.jpg"><img alt="../../../_images/ad717x_architecture.jpg" src="../../../_images/ad717x_architecture.jpg" style="width: 200px;" />
</a>
</div></blockquote>
<p>The application layer uses the ADI Console Libraries to create console based User Interactive (UI).
The middle layer of No-OS device library have device specific APIs to interface with AD717x/AD411x device.
These APIs allows direct access to device register map in order to read/write device registers. The bottom layer of Platform
Drivers is responsible for Low Level Interface. The platform drivers uses underlying libraries to access low level peripheral
(like GPIOs, SPI, I2C, etc).</p>
<p>The Platform simplifies the overall software development process by providing the low level driver support. This reduces
the hardware dependency as any Mbed enabled board (Or an STM32 board) can be used with same firmware with little modifications (precisely changing a pin mapping).</p>
</section>
<section id="interface-diagram">
<h2>Interface Diagram<a class="headerlink" href="#interface-diagram" title="Link to this heading"></a></h2>
<blockquote>
<div><a class="reference internal image-reference" href="../../../_images/ad717x_interface_diagram.jpg"><img alt="../../../_images/ad717x_interface_diagram.jpg" src="../../../_images/ad717x_interface_diagram.jpg" style="width: 500px;" />
</a>
</div></blockquote>
<p>The EVAL-AD411x/EVAL-AD717x board is connected to SDP-K1 through on-board default 120-pin SDP Connector. The AD717x/AD411x EVAL boards can be powered-up through a SDP-K1 USB supply or from external DC supply,
depending on the power supply jumper settings. The settings can vary board to board and user must refer user manual of respective EVAL board for ensuring the proper connections.
The SDP-K1 is connected to PC through an USB cable. The firmware (binary executable) can be loaded into SDP-K1 board through this USB interface from the PC.
The SDP-K1 acts as a Serial Device (UART) and firmware loaded into it interacts with any serial terminal (like Teraterm, Putty, Coolterm, etc) by configuring terminal for proper serial settings (COM Port, Baud Rate, data bits, etc).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The firmware provides a basic user-interface for interacting with the evaluation-board. All the main functionality of the AD411x/AD711x is provided in the application-code in abstracted form and the user is free to customize the software to suit their own needs for working with the AD711x/AD411x.</p>
</div>
</section>
<section id="useful-links">
<h2>Useful Links<a class="headerlink" href="#useful-links" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/precision-converters-firmware" target="_blank">Source Code: Precision Converters Firmware</a></p></li>
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS" target="_blank">no-OS: Software drivers for systems without OS</a></p></li>
<li><p><a class="icon link reference external" href="https://studio.keil.arm.com/auth/login/" target="_blank">Keil Studio Web IDE/Compiler</a></p></li>
<li><p><a class="icon link reference external" href="https://os.mbed.com/platforms/SDP_K1/" target="_blank">SDP-K1 on Mbed</a></p></li>
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/linux" target="_blank">Linux Drivers</a></p></li>
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/hdl" target="_blank">HDL Source Code</a></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Linux and HDL are not used in emebdded IIO firmware projects but
they may be of interest if you require Linux and/or FPGA support.</p>
</div>
</section>
<section id="hardware-connections">
<h2>Hardware Connections<a class="headerlink" href="#hardware-connections" title="Link to this heading"></a></h2>
<blockquote>
<div><a class="reference internal image-reference" href="../../../_images/ad717x_hw_connection.jpg"><img alt="../../../_images/ad717x_hw_connection.jpg" src="../../../_images/ad717x_hw_connection.jpg" style="width: 400px;" />
</a>
</div></blockquote>
</section>
<section id="power-supply-and-usb-connection">
<h2>Power Supply and USB Connection<a class="headerlink" href="#power-supply-and-usb-connection" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>SDP-K1- Connect the VIO_ADJUST jumper on the SDP-K1 board to 3.3V position to drive SDP-K1 GPIOs at 3.3V</p></li>
<li><p>EVAL-AD4111SDZ Board (AD4111/AD4112 chip)- Connect PWR (LK3) connector to USB_SUPP (B) position to power-up device from the SDP-K1 USB.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The settings can vary board to board and user must refer user manual of respective EVAL board for ensuring the proper connections.</p>
</div>
<p>SDP-K1 is powered through USB connection from the PC. SDP-K1 acts as a Serial device when connected to PC, which creates a COM Port to connect to Serial Terminals like Teraterm, Putty, etc.
The COM port assigned to a device can be seen through the device manager for windows based OS.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../../_images/com_port_sdp-k11.jpg"><img alt="../../../_images/com_port_sdp-k11.jpg" src="../../../_images/com_port_sdp-k11.jpg" style="width: 300px;" />
</a>
</div></blockquote>
</section>
<section id="ad717x-firmware">
<h2>AD717x Firmware<a class="headerlink" href="#ad717x-firmware" title="Link to this heading"></a></h2>
<p>This section briefs on the usage of firmware. This also explains the steps to compile and build the application using
mbed and make based build.</p>
<p>The software execution sequence for the AD717x/AD411x Firmware Example is shown below. This is a blocking application as it waits for user input over serial interface (UART).
The input is scanned and processed through ‘adi console libraries’. The menu functionality is executed from ad717x_conole_app.c file. The application layer talks with No-OS layer
for device registers and data access. The No-OS layer interfaces with Platform Drivers layer for accessing low level peripherals. As name suggests, this layer is platform dependent.
AD717x/AD411x firmware uses underlying libraries within Platform Drivers layer.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../../_images/sequence_diagram_ad717x.jpg"><img alt="../../../_images/sequence_diagram_ad717x.jpg" src="../../../_images/sequence_diagram_ad717x.jpg" style="width: 700px;" />
</a>
</div></blockquote>
</section>
<section id="build-guide">
<h2>Build Guide<a class="headerlink" href="#build-guide" title="Link to this heading"></a></h2>
<section id="build-prerequisites">
<h3>Build Prerequisites<a class="headerlink" href="#build-prerequisites" title="Link to this heading"></a></h3>
<p>Prior to building a firmware project, it is required to set up an environment so
that the build process may find the necessary tools (compiler, linker, SDK etc.).
Use the following steps to prepare your environment for building firmware projects
for respective platform.</p>
<div><div class="collapsible docutils container">
<input class="collapsible_input" id="d21ad2cb7a8b86eb27746a20544728dc233b644a" name="d21ad2cb7a8b86eb27746a20544728dc233b644a" type="checkbox"></input><label for="d21ad2cb7a8b86eb27746a20544728dc233b644a"><p>Windows</p>
<div class="icon"></div></label><div class="collapsible_content docutils container">
<div><div class="collapsible docutils container">
<input class="collapsible_input" id="09fb7c01896ae766da2ee01308090388bae68d1b" name="09fb7c01896ae766da2ee01308090388bae68d1b" type="checkbox"></input><label for="09fb7c01896ae766da2ee01308090388bae68d1b"><p>Mbed</p>
<div class="icon"></div></label><div class="collapsible_content docutils container">
<div><div class="collapsible docutils container">
<input class="collapsible_input" id="39f5f3bbb61ac4ff030ff90ba173d6b14ddaee72" name="39f5f3bbb61ac4ff030ff90ba173d6b14ddaee72" type="checkbox"></input><label for="39f5f3bbb61ac4ff030ff90ba173d6b14ddaee72"><p>For Web/Online Build</p>
<div class="icon"></div></label><div class="collapsible_content docutils container">
<ul class="simple">
<li><p>Visit <a class="icon link reference external" href="https://www.keil.arm.com/" target="_blank">Arm Keil website</a> to create an user account for accessing the web based Keil Studio IDE.</p></li>
<li><p>Open <a class="icon link reference external" href="https://studio.keil.arm.com/auth/login/" target="_blank">Keil Studio Web IDE</a> with registered user account</p></li>
</ul>
</div>
</div>
</div><div><div class="collapsible docutils container">
<input class="collapsible_input" id="a16acbaf74415871cd32264793d63ec12b79936d" name="a16acbaf74415871cd32264793d63ec12b79936d" type="checkbox"></input><label for="a16acbaf74415871cd32264793d63ec12b79936d"><p>For Make Build</p>
<div class="icon"></div></label><div class="collapsible_content docutils container">
<ul class="simple">
<li><p>Clone Precision Converters Firmware repository with the –recursive flag (not needed if building with web IDE for Mbed platform):</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>--recursive<span class="w"> </span>https://github.com/analogdevicesinc/precision-converters-firmware
</pre></div>
</div>
<ul class="simple">
<li><p>If however you’ve already cloned the repository without the –recursive flag, you may initialize all the submodules in an existing cloned repo with:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>submodule<span class="w"> </span>update<span class="w"> </span>--recursive<span class="w"> </span>--init
</pre></div>
</div>
<ul>
<li><p>Install <a class="icon link reference external" href="https://gnuwin32.sourceforge.net/packages/make.htm" target="_blank">Make</a> in the root of ‘C’ drive without any spaces in the installation path. The path must be <strong>C:\GnuWin32\…</strong>. Add this path into the system environmental path variable (as shown in below screenshot).</p></li>
<li><p>Install <a class="icon link reference external" href="https://git-scm.com/downloads" target="_blank">Git</a> and add a path of <strong>C:\Program Files\Git\usr\bin\</strong> directory into system environmental path variable (please verify your git installation path is correct).</p></li>
<li><p>Install Mbed CLI 1 as per guide <a class="icon link reference external" href="https://os.mbed.com/docs/mbed-os/v6.15/build-tools/install-and-set-up.html" target="_blank">here</a>.</p></li>
<li><p>Install <a class="icon link reference external" href="https://developer.arm.com/downloads/-/gnu-rm." target="_blank">GNU Arm Embedded compiler</a> (for the development, 9-2019-q4-major version is used) and add a path of GNU Arm Embedded Toolchain bin directory into the system environmental path variable (as shown in below screenshot).</p></li>
<li><p>Configure the compiler location with Mbed CLI. This can be carried out by running the <strong>mbed config -G GCC_ARM_PATH &lt;path-to-your-gcc-compiler&gt;</strong> in Command Prompt. For example you can run <strong>mbed config -G GCC_ARM_PATH “C:\Program Files (x86)\GNU Tools ARM Embedded\9 2019-q4-major\bin”</strong> in command prompt. It will set mentioned compiler path to all the Mbed Projects.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../../_images/environmental_variables.png"><img alt="../../../_images/environmental_variables.png" src="../../../_images/environmental_variables.png" style="width: 400px;" />
</a>
</div></blockquote>
</li>
</ul>
</div>
</div>
</div></div>
</div>
</div><div><div class="collapsible docutils container">
<input class="collapsible_input" id="fa09a7188e5b64e6db36c1092089233b09fd75ba" name="fa09a7188e5b64e6db36c1092089233b09fd75ba" type="checkbox"></input><label for="fa09a7188e5b64e6db36c1092089233b09fd75ba"><p>STM32</p>
<div class="icon"></div></label><div class="collapsible_content docutils container">
<div><div class="collapsible docutils container">
<input class="collapsible_input" id="31dd6c13542299d944a089597884f96e3993de5c" name="31dd6c13542299d944a089597884f96e3993de5c" type="checkbox"></input><label for="31dd6c13542299d944a089597884f96e3993de5c"><p>For STM32 IDE based Build</p>
<div class="icon"></div></label><div class="collapsible_content docutils container">
<ul>
<li><p>Install <a class="icon link reference external" href="https://www.st.com/en/development-tools/stm32cubeide.html" target="_blank">STM32CubeIDE</a></p></li>
<li><p>Install <a class="icon link reference external" href="https://www.st.com/en/development-tools/stm32cubemx.html" target="_blank">STM32CubeMX</a></p>
<blockquote>
<div><a class="reference internal image-reference" href="../../../_images/environmental_variables.png"><img alt="../../../_images/environmental_variables.png" src="../../../_images/environmental_variables.png" style="width: 400px;" />
</a>
</div></blockquote>
</li>
</ul>
</div>
</div>
</div></div>
</div>
</div></div>
</div>
</div></section>
<section id="building-a-project">
<h3>Building a project<a class="headerlink" href="#building-a-project" title="Link to this heading"></a></h3>
<p>Once the build enviornment is setup, follow the guide below to build your project
and generate executable file (.bin/.hex)</p>
<div><div class="collapsible docutils container">
<input class="collapsible_input" id="4e36d84c7a50755ee7cf6b38b7ce0c2fcb39378a" name="4e36d84c7a50755ee7cf6b38b7ce0c2fcb39378a" type="checkbox"></input><label for="4e36d84c7a50755ee7cf6b38b7ce0c2fcb39378a"><p>Windows</p>
<div class="icon"></div></label><div class="collapsible_content docutils container">
<div><div class="collapsible docutils container">
<input class="collapsible_input" id="8a96b2f5ce328a338a212ed635951e2db86e0faa" name="8a96b2f5ce328a338a212ed635951e2db86e0faa" type="checkbox"></input><label for="8a96b2f5ce328a338a212ed635951e2db86e0faa"><p>Mbed</p>
<div class="icon"></div></label><div class="collapsible_content docutils container">
<div><div class="collapsible docutils container">
<input class="collapsible_input" id="f2c48851e525d0a0dff128e83d63241bbb3850e3" name="f2c48851e525d0a0dff128e83d63241bbb3850e3" type="checkbox"></input><label for="f2c48851e525d0a0dff128e83d63241bbb3850e3"><p>Build Using Web/Online IDE</p>
<div class="icon"></div></label><div class="collapsible_content docutils container">
<ul>
<li><p>Clone the <a class="icon link reference external" href="https://github.com/analogdevicesinc/precision-converters-firmware" target="_blank">Precision Converters Firmware repository</a> into Keil Studio using “File-&gt;clone…” menu.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../../_images/mbed_keil_studio_project_clone.png"><img alt="../../../_images/mbed_keil_studio_project_clone.png" src="../../../_images/mbed_keil_studio_project_clone.png" style="width: 600px;" />
</a>
</div></blockquote>
</li>
<li><p>Once the project repository is imported, wait until all library dependencies are imported as shown in below screenshot. Now, open the ‘.medignore’ file present in the root directory of repository. Add comment syntax (two forward slashes) in front of the project name which you want to build. This will ignore all other projects and build only the comment syntax selected project.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../../_images/mbedignore_changes.png"><img alt="../../../_images/mbedignore_changes.png" src="../../../_images/mbedignore_changes.png" style="width: 600px;" />
</a>
</div></blockquote>
</li>
<li><p>Select the target device (default used for development is SDP-K1) and click on ‘Clean build’ option to build the project. After a successful build a binary will be downloaded to your computer- store this on your drive. Drag and drop this binary to the USB drive hosted by your controller board to flash the MCU.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../../_images/mbed_build.png"><img alt="../../../_images/mbed_build.png" src="../../../_images/mbed_build.png" style="width: 400px;" />
</a>
</div></blockquote>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you intend to build different project, then modify the .medignore file in the root directory as
mentioned in step2 and clean build project as mentioned in step3</p>
</div>
</div>
</div>
</div><div><div class="collapsible docutils container">
<input class="collapsible_input" id="392c4f82a53d51f38b7cc22de16957d050be656e" name="392c4f82a53d51f38b7cc22de16957d050be656e" type="checkbox"></input><label for="392c4f82a53d51f38b7cc22de16957d050be656e"><p>Build Using Make</p>
<div class="icon"></div></label><div class="collapsible_content docutils container">
<ul class="simple">
<li><p>Open Git bash and change current directory to project directory (eg. <strong>precision-converters-firmware/projects/ad4130_iio</strong> directory) which you want to build.</p></li>
<li><p>Type <strong>make</strong> on the git bash command prompt to build a project.</p></li>
<li><p>After successful build, binary file will be created into the <strong>Project_Name/build</strong> directory.</p></li>
<li><p>If you want to clean build, type <strong>make reset</strong> on git bash command which deletes all generated build files for the given project.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Default TARGET_BOARD is SDP_K1 and COMPILER is GCC_ARM. Current Make based build only support GCC_ARM Compiler.</p>
</div>
<ul class="simple">
<li><p>By default project is built for “SDP_K1” Board and “GCC_ARM” Compiler. If you want to build for other Mbed Board, For example If you want to build the project for “DISCO_F769NI” Board then run <strong>make TARGET_BOARD=DISCO_F769NI</strong> command in git bash command prompt. If you want to clean build, run <strong>make reset TARGET_BOARD=DISCO_F769NI</strong> command to delete the generated build files for the given project.</p></li>
</ul>
</div>
</div>
</div></div>
</div>
</div><div><div class="collapsible docutils container">
<input class="collapsible_input" id="6d4692d8c91dfb061dfba381ec4ebfcee15fe389" name="6d4692d8c91dfb061dfba381ec4ebfcee15fe389" type="checkbox"></input><label for="6d4692d8c91dfb061dfba381ec4ebfcee15fe389"><p>STM32</p>
<div class="icon"></div></label><div class="collapsible_content docutils container">
<div><div class="collapsible docutils container">
<input class="collapsible_input" id="40d95710ac8c485fd38ee69527a9ba568f6db616" name="40d95710ac8c485fd38ee69527a9ba568f6db616" type="checkbox"></input><label for="40d95710ac8c485fd38ee69527a9ba568f6db616"><p>Build Using STM32 IDE</p>
<div class="icon"></div></label><div class="collapsible_content docutils container">
<ul>
<li><p>Open the respective project directory by navigating into the “precision_converters_firmware/projects/” folder.</p></li>
<li><p>In the “STM32” folder present within the project directory, double click and open the .ioc file present within.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../../_images/stm32_project_directory.png"><img alt="../../../_images/stm32_project_directory.png" src="../../../_images/stm32_project_directory.png" style="width: 600px;" />
</a>
</div></blockquote>
</li>
<li><p>Click on the “Generate Code” option seen on the top right corner</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../../_images/stm32_generate_code.png"><img alt="../../../_images/stm32_generate_code.png" src="../../../_images/stm32_generate_code.png" style="width: 600px;" />
</a>
</div></blockquote>
</li>
<li><p>Upon successful generation of drivers for the selected MCU, the autogenerated files would be seen in the same directory where the .ioc file was present. Double click and open the “.project” file seen in the list of files</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../../_images/stm32_auto_generated_files.png"><img alt="../../../_images/stm32_auto_generated_files.png" src="../../../_images/stm32_auto_generated_files.png" style="width: 600px;" />
</a>
</div></blockquote>
</li>
<li><p>After the project is loaded to the STM32CubeIDE, unfold the adxxxx_iio project seen in the project explorer, right click the “app” folder, select “Settings” under the “C/C++ Build” section on the left pane and un-check the “Exclude resources from build” checkbox. This would ensure that the project specific files are included by the build system</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../../_images/stm32_exclude_files_option.png"><img alt="../../../_images/stm32_exclude_files_option.png" src="../../../_images/stm32_exclude_files_option.png" style="width: 600px;" />
</a>
</div></blockquote>
</li>
<li><p>In order to choose STM32 platform in the firmware, select the “ACTIVE_PLATFORM” as “STM32_PLATFORM” in the app_config.h from the respective project. Alternately , add compiler flag “ACTIVE_PLATFORM=value of STM32_PLATFORM in app_config.h” for selecting stm32 platform.</p></li>
<li><p>Add compiler flags “-u _printf_float” to the project settings.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../../_images/stm32_compiler_flag.png"><img alt="../../../_images/stm32_compiler_flag.png" src="../../../_images/stm32_compiler_flag.png" style="width: 600px;" />
</a>
</div></blockquote>
</li>
<li><p>Program by clicking on the “Run adxxxx_iio” option seen or by performing a copy-&gt;paste option of the .hex file seen in the STM32/Debug folder</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../../_images/stm32_run_option.png"><img alt="../../../_images/stm32_run_option.png" src="../../../_images/stm32_run_option.png" style="width: 600px;" />
</a>
</div></blockquote>
</li>
</ul>
</div>
</div>
</div></div>
</div>
</div></div>
</div>
</div></section>
<section id="running-a-project">
<h3>Running a project<a class="headerlink" href="#running-a-project" title="Link to this heading"></a></h3>
<p>Once the firmware build is successful and binary file is generated, copy the
generated binary into USB drive hosted by your MCU board (e.g. USB drive hosted
by the supported MCU board on windows). This will flash the binary file into MCU present
on the controller board. Programming might vary based on the tools used for building
a project. The ‘Project Build’ section above talks about this exception at the end
of all build steps.</p>
</section>
</section>
<section id="quick-start">
<h2>Quick Start<a class="headerlink" href="#quick-start" title="Link to this heading"></a></h2>
<p>If you have some familiarity with the Mbed or STM32 platform, the following is a basic list of steps required to start running the code,
see below for more detail:</p>
<ul class="simple">
<li><p>Connect the AD717x/AD411x EVAL-board to the SDP-K1 controller board.</p></li>
<li><p>Connect the SDP-K1 controller board to your computer over USB.</p></li>
<li><p>Follow the steps mentioned in the Build Guide section above.</p></li>
<li><dl class="simple">
<dt>Start up a serial terminal emulator (e.g. Tera Term)</dt><dd><ul>
<li><p>Find the com-port your controller board is connected on and select it.</p></li>
<li><p>Set the baud-rate for 230400</p></li>
<li><p>Reset the controller board and connect.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Use the menu provided over the terminal window to access the evaluation board.</p></li>
</ul>
</section>
<section id="using-the-firmware">
<h2>Using the Firmware<a class="headerlink" href="#using-the-firmware" title="Link to this heading"></a></h2>
<p>The AD711x/AD411x firmware example is configured to have following serial settings:</p>
<p>Baud rate: 230400
Data bits: 8-bits
Parity: None
Stop bits: 1</p>
<p>Configure your serial terminal (<a class="icon link reference external" href="https://osdn.net/projects/ttssh2/releases/" target="_blank">Tera Term</a>)
for below settings:</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../../_images/baud_rate_update1.png"><img alt="../../../_images/baud_rate_update1.png" src="../../../_images/baud_rate_update1.png" style="width: 400px;" />
</a>
</div></blockquote>
<p>The AD717x/AD411x console main menu looks like below (with Tera Term):</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../../_images/ad4111_console_menu.png"><img alt="../../../_images/ad4111_console_menu.png" src="../../../_images/ad4111_console_menu.png" style="width: 400px;" />
</a>
</div></blockquote>
<p>The firmware is designed to be intuitive to use, and requires little explanation, simply enter a number corresponding to the required command and follow the on-screen prompts.</p>
<p>The firmware comes with an app_config.h file which (at the moment) serves two purposes.
* Select the active device to test.
* Configure the pins you want to use to connect the controller board to the evaluation board.</p>
<p>The firmware supports most products in AD717x/AD411x family, change the #define DEV_ADxxxx found in app_config.h to suit your selected device.
e.g. #define DEV_AD7111_2 executes the AD7112-2 device functionality.</p>
</section>
<section id="support">
<h2>Support<a class="headerlink" href="#support" title="Link to this heading"></a></h2>
<p>Feel free to ask questions in the <a class="icon link reference external" href="https://ez.analog.com/data_converters" target="_blank">EngineerZone</a></p>
</section>
</section>


          </div>
              <div class="related">
                &nbsp;
    <a href="../ad4134_iio/ad4134_iio.html" title="Previous document (Alt+Shift+LeftArrow)" class="prev">AD4134/AD7134 IIO Application</a>
    <a href="../ad717x_iio/ad717x_iio.html" title="Next document (Alt+Shift+RightArrow)" class="next">AD717x / AD411x IIO Application</a>
              </div>
          
        </div>
      </div>
  </div>

  <label id="cancel-area-show-toc" for="input-show-toc"></label>
  <label id="cancel-area-show-localtoc" for="input-show-localtoc"></label>
    <footer>
      &#169;2023-2024, Analog Devices Inc.
      
      |
      Made with <a href="https://www.sphinx-doc.org/">Sphinx</a>
      &amp; <a href="https://github.com/analogdevicesinc/doctools">Doctools</a>
      
    </footer>
  </body>
</html>